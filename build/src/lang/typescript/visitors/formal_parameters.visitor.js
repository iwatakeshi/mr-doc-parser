"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Node_1 = require("../Node");
const type_visitor_1 = require("./type.visitor");
const match_1 = require("../../../utils/match");
function visitFormalParameters(source, node) {
    return {
        type: node.type,
        context: Node_1.createNode(source, node),
        parameters: node.children
            .filter(child => !child.type.match(/[(),]/))
            .map(child => visitRequiredParameter(source, child))
    };
}
exports.visitFormalParameters = visitFormalParameters;
function visitRequiredParameter(source, node) {
    let required_parameter = node.children, identifier, type_annotation;
    if (match_1.default(required_parameter[0], 'identifier')) {
        identifier = Node_1.createNode(source, required_parameter.shift());
    }
    if (match_1.default(required_parameter[0], 'type_annotation')) {
        let type = required_parameter.shift().children[1];
        type_annotation = type_visitor_1.visitType(source, type);
    }
    return {
        type: 'parameter',
        context: Node_1.createNode(source, node),
        identifier,
        type_annotation
    };
}
exports.visitRequiredParameter = visitRequiredParameter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWFsX3BhcmFtZXRlcnMudmlzaXRvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9sYW5nL3R5cGVzY3JpcHQvdmlzaXRvcnMvZm9ybWFsX3BhcmFtZXRlcnMudmlzaXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGtDQUFxQztBQUVyQyxpREFBMkM7QUFFM0MsZ0RBQXlDO0FBRXpDLFNBQWdCLHFCQUFxQixDQUFDLE1BQWMsRUFBRSxJQUFnQjtJQUNwRSxPQUFPO1FBQ0wsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO1FBQ2YsT0FBTyxFQUFFLGlCQUFVLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQztRQUNqQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFFBQVE7YUFDeEIsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQzthQUMzQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7S0FDckQsQ0FBQTtBQUNILENBQUM7QUFSRCxzREFRQztBQUdELFNBQWdCLHNCQUFzQixDQUFDLE1BQWMsRUFBRSxJQUFnQjtJQUNyRSxJQUFJLGtCQUFrQixHQUFHLElBQUksQ0FBQyxRQUFRLEVBQ3BDLFVBQVUsRUFDVixlQUFlLENBQUM7SUFHbEIsSUFBSSxlQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLEVBQUU7UUFDOUMsVUFBVSxHQUFHLGlCQUFVLENBQUMsTUFBTSxFQUFFLGtCQUFrQixDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7S0FDN0Q7SUFFRCxJQUFHLGVBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxpQkFBaUIsQ0FBQyxFQUFFO1FBQ2xELElBQUksSUFBSSxHQUFHLGtCQUFrQixDQUFDLEtBQUssRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRCxlQUFlLEdBQUcsd0JBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDM0M7SUFFRCxPQUFPO1FBQ0wsSUFBSSxFQUFFLFdBQVc7UUFDakIsT0FBTyxFQUFFLGlCQUFVLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQztRQUNqQyxVQUFVO1FBQ1YsZUFBZTtLQUNoQixDQUFBO0FBQ0gsQ0FBQztBQXJCRCx3REFxQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVOb2RlIH0gZnJvbSBcIi4uL05vZGVcIjtcbmltcG9ydCB7IFN5bnRheE5vZGUgfSBmcm9tIFwidHJlZS1zaXR0ZXJcIjtcbmltcG9ydCB7IHZpc2l0VHlwZSB9IGZyb20gXCIuL3R5cGUudmlzaXRvclwiO1xuaW1wb3J0IFNvdXJjZSBmcm9tIFwiLi4vLi4vLi4vaW50ZXJmYWNlcy9Tb3VyY2VcIjtcbmltcG9ydCBtYXRjaCBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvbWF0Y2hcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHZpc2l0Rm9ybWFsUGFyYW1ldGVycyhzb3VyY2U6IFNvdXJjZSwgbm9kZTogU3ludGF4Tm9kZSkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IG5vZGUudHlwZSxcbiAgICBjb250ZXh0OiBjcmVhdGVOb2RlKHNvdXJjZSwgbm9kZSksXG4gICAgcGFyYW1ldGVyczogbm9kZS5jaGlsZHJlblxuICAgIC5maWx0ZXIoY2hpbGQgPT4gIWNoaWxkLnR5cGUubWF0Y2goL1soKSxdLykpXG4gICAgLm1hcChjaGlsZCA9PiB2aXNpdFJlcXVpcmVkUGFyYW1ldGVyKHNvdXJjZSwgY2hpbGQpKVxuICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHZpc2l0UmVxdWlyZWRQYXJhbWV0ZXIoc291cmNlOiBTb3VyY2UsIG5vZGU6IFN5bnRheE5vZGUpIHtcbiAgbGV0IHJlcXVpcmVkX3BhcmFtZXRlciA9IG5vZGUuY2hpbGRyZW4sXG4gICAgaWRlbnRpZmllcixcbiAgICB0eXBlX2Fubm90YXRpb247XG4gICAgXG5cbiAgaWYgKG1hdGNoKHJlcXVpcmVkX3BhcmFtZXRlclswXSwgJ2lkZW50aWZpZXInKSkge1xuICAgIGlkZW50aWZpZXIgPSBjcmVhdGVOb2RlKHNvdXJjZSwgcmVxdWlyZWRfcGFyYW1ldGVyLnNoaWZ0KCkpO1xuICB9XG5cbiAgaWYobWF0Y2gocmVxdWlyZWRfcGFyYW1ldGVyWzBdLCAndHlwZV9hbm5vdGF0aW9uJykpIHtcbiAgICBsZXQgdHlwZSA9IHJlcXVpcmVkX3BhcmFtZXRlci5zaGlmdCgpLmNoaWxkcmVuWzFdO1xuICAgIHR5cGVfYW5ub3RhdGlvbiA9IHZpc2l0VHlwZShzb3VyY2UsIHR5cGUpOyBcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdHlwZTogJ3BhcmFtZXRlcicsXG4gICAgY29udGV4dDogY3JlYXRlTm9kZShzb3VyY2UsIG5vZGUpLFxuICAgIGlkZW50aWZpZXIsXG4gICAgdHlwZV9hbm5vdGF0aW9uXG4gIH1cbn0iXX0=